//
   Created by kc on 29.01.15.

extends layout
block head
   link(rel='stylesheet', href='/css/newgame.css')
   link(rel='stylesheet', href='/modules/angular-pickadate/dist/angular-pickadate.css')
   script(src="/maps")
   script(src="/modules/angular-i18n/angular-locale_de-ch.js")
   script(src='/modules/angular-pickadate/dist/angular-pickadate.min.js')
block content
      h1 Neues Spiel anlegen
      .row(ng-cloak)
         .col-md-6
            form(name='newForm')
              .form-group.form-group-lg.is-empty
                label.control-label(for='gamename1') Spielname
                input(type='text' id='gamename1' name='gamename1' class='form-control' required ng-minlength='3' ng-maxlength='60' ng-model='gamename')
                p(class='bg-danger' ng-hide='newForm.gamename1.$valid') Ungültige Eingabe: Der Name muss zwischen 3 und 60 Zeichen lang sein

              .form-group.form-group-lg.is-empty
                label.control-label Karte
                .radio.radio-primary(ng-repeat='m in maps' ng-show='m.enabled')
                  label
                    input( type='radio' name='map' value='{{m.map}}' ng-model='map' checked='')
                    strong {{m.name}}:&nbsp;
                    | {{m.description}}

              span(id='helpmap' class='help-block') Die Spielkarte bestimmt, aus welchen Orten man die Preisliste gestalten kann. Diese Einstellung kann später nicht mehr geändert werden.
              .form-group.form-group-lg.is-empty
                label.control-label(for='random-list') Zufallspreisliste
                select#random-list(class='form-control' ng-model='random' convert-to-number)
                  option(value='0' default) Keine Orte der Preisliste zuweisen
                  option(value='60') 60
                  option(value='80') 80
                  option(value='100') 100
                  option(value='120') 120
                  option(value='150') 150
                  option(value='180') 180
                  option(value='200') 200
                //span(id='helprandom' class='help-block') Auf Wunsch werden zufällig Orte der Preisliste zugewiesen. Damit ist ein einfacher Start möglich, die Lage der Orte muss trotzdem noch kritisch überprüft werden!

         .col-md-6
              h4 Spiel-Datum
              div(pickadate ng-model="gamedate" name='gamedate' id='gamedate' week-starts-on="1" min-date="minDate")
              span(class='help-block') Gegenwärtig werden nur eintägige Spiele unterstützt. Die Start- und Endzeit kann in den Spieleinstellungen später angepasst werden.

              button.btn.btn-default.btn-primary.btn-raised(type='submit' ng-click='validateAndSave()' ng-disabled='!createEnabled || (!newForm.$valid)') Spiel anlegen

              p(id='error-message')
                |{{errorMessage}}
