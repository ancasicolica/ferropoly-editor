/*! Ferropoly-Editor V2.4.4 06-09-2018, (c) Christian Kuster, CH-8342 Wernetshausen, christian@kusti.ch> */

"use strict";var Property=function(loadedProperty){var ICON_EDIT_LOCATION="https://maps.gstatic.com/mapfiles/ms2/micons/red-dot.png";var ICON_TRAIN_LOCATION="https://maps.gstatic.com/mapfiles/ms2/micons/green.png";var ICON_BUS_LOCATION="https://maps.gstatic.com/mapfiles/ms2/micons/yellow.png";var ICON_BOAT_LOCATION="https://maps.gstatic.com/mapfiles/ms2/micons/blue.png";var ICON_CABLECAR_LOCATION="https://maps.gstatic.com/mapfiles/ms2/micons/purple.png";var ICON_OTHER_LOCATION="https://maps.gstatic.com/mapfiles/ms2/micons/pink.png";var iconPriceLabels=["A.png","B.png","C.png","D.png","E.png","F.png"];var ICON_TRAIN_LOCATION_USED="/images/markers/letters/green_Marker";var ICON_BUS_LOCATION_USED="/images/markers/letters/yellow_Marker";var ICON_BOAT_LOCATION_USED="/images/markers/letters/blue_Marker";var ICON_CABLECAR_LOCATION_USED="/images/markers/letters/purple_Marker";var ICON_OTHER_LOCATION_USED="/images/markers/letters/pink_Marker";if(!(this instanceof Property)){return new Property}this.data=loadedProperty;this.marker=null;this.dataChanged=false;this.attachToMarker=function(marker){this.marker=marker};this.dataChanged=function(){this.dataChanged=true};this.setMarkerIcon=function(editMode){if(this.marker){var x=-1;if(this.data.pricelist){x=this.data.pricelist.priceRange}if(editMode){this.marker.setIcon(ICON_EDIT_LOCATION)}else{switch(this.data.location.accessibility){case"train":if(x===-1){this.marker.setIcon(ICON_TRAIN_LOCATION)}else{this.marker.setIcon(ICON_TRAIN_LOCATION_USED+iconPriceLabels[x])}break;case"bus":if(x===-1){this.marker.setIcon(ICON_BUS_LOCATION)}else{this.marker.setIcon(ICON_BUS_LOCATION_USED+iconPriceLabels[x])}break;case"boat":if(x===-1){this.marker.setIcon(ICON_BOAT_LOCATION)}else{this.marker.setIcon(ICON_BOAT_LOCATION_USED+iconPriceLabels[x])}break;case"cablecar":if(x===-1){this.marker.setIcon(ICON_CABLECAR_LOCATION)}else{this.marker.setIcon(ICON_CABLECAR_LOCATION_USED+iconPriceLabels[x])}break;default:if(x===-1){this.marker.setIcon(ICON_OTHER_LOCATION)}else{this.marker.setIcon(ICON_OTHER_LOCATION_USED+iconPriceLabels[x])}break}}}}};Property.prototype.fitsFilterCriteria=function(filter){if(!filter){return false}if(filter.priceRange){if(filter.priceRange==="all"){return true}if(filter.priceRange==="allInList"){return parseInt(this.data.pricelist.priceRange)>-1}try{return parseInt(filter.priceRange)===parseInt(this.data.pricelist.priceRange)}catch(e){console.warning(e);return false}}};Property.prototype.getAccessibilityText=function(){switch(this.data.location.accessibility){case"train":return"Bahn";case"bus":return"Bus";case"boat":return"Schiff";case"cablecar":return"Seilbahn / Standseilbahn";default:return"Andere (Tram, U-Bahn,...)"}};Property.prototype.getPriceRangeText=function(){switch(parseInt(this.data.pricelist.priceRange)){case-1:return"unbenutzt";case 0:return"sehr billig";case 1:return"billig";case 2:return"unt. Mittelf.";case 3:return"ob. Mittelf.";case 4:return"teuer";case 5:return"sehr teuer";default:return"?"}};Property.prototype.setPositionInPriceRange=function(pos){this.data.pricelist.positionInPriceRangeChanged=this.data.pricelist.positionInPriceRange!==pos;this.data.pricelist.positionInPriceRange=pos};Property.prototype.getPricelistPositionSaveSet=function(){if(!this.data.pricelist.positionInPriceRangeChanged){return null}return{uuid:this.data.uuid,positionInPriceRange:this.data.pricelist.positionInPriceRange}};