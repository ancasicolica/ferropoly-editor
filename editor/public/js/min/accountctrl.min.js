/*! Ferropoly-Editor V2.4.0 06-01-2018, (c) Christian Kuster, CH-8342 Wernetshausen, christian@kusti.ch> */

"use strict";angular.module("accountApp",[]).controller("accountCtrl",["$scope","$http",function($scope,$http){$scope.data=null;$http.get("/userinfo").then(function(resp){$scope.data=resp.data.info},function(resp){console.error("/userinfo",resp);genericModals.showError("Fehler","Die Accountdaten konnten nicht geaden werden.",resp,function(){window.location.href="/"})});$scope.getRegistrationDate=function(){if(!$scope.data){return""}return moment($scope.data.info.registrationDate).format("DD.MM.YYYY H:mm")};$scope.getAvatarUrl=function(index){if(!$scope.data){return""}switch(index){case 0:if(!$scope.data.personalData.avatar){return $scope.data.info.generatedAvatar}return $scope.data.personalData.avatar;case 1:if(!$scope.data.info.facebook||!$scope.data.info.facebook.photos){return $scope.data.info.generatedAvatar}return $scope.data.info.facebook.photos[0].value;case 2:if(!$scope.data.info.google||!$scope.data.info.google.photos){return $scope.data.info.generatedAvatar}return $scope.data.info.google.photos[0].value}};$scope.isFacebookActive=function(){if(!$scope.data){return false}return $scope.data.login.facebookProfileId};$scope.isGoogleActive=function(){if(!$scope.data){return false}return $scope.data.login.googleProfileId};$scope.isDropboxActive=function(){if(!$scope.data){return false}return $scope.data.login.dropboxProfileId};$scope.isMicrosoftActive=function(){if(!$scope.data){return false}return $scope.data.login.microsoftProfileId}}]);