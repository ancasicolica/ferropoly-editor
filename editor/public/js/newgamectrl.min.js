"use strict";var newGameControl=angular.module("newgameApp",["ui.bootstrap","pickadate"]).config(function(a){a.translations={prev:'<i class="icon-chevron-left"></i> früher',next:'später <i class="icon-chevron-right"></i>'}});newGameControl.controller("newgameCtrl",["$scope","$http","$interval",function(a,b){a.map="zvv",a.gamename="Ferropoly Spiel",a.errorMessage="",a.gamedate=(new Date).add(1).day().toString("yyyy-MM-dd"),a.dateError=void 0,a.minDate=Date.today().toString("yyyy-MM-dd");var c="none";$(document).ready(function(){b.get("/authtoken").success(function(a){c=a.authToken,console.log("Auth ok")}).error(function(b,c){console.log("error:"),console.log(b),console.log(c),a.errorMessage="Authentisierungsfehler, das Spiel kann nicht erstellt werden. Status: "+c})}),a.validateDate=function(){a.dateError=new Date(a.gamedate)<new Date?"Das Datum muss in der Zukunft liegen.":void 0},a.validateAndSave=function(){b.post("/gameplay/createnew",{gamename:a.gamename,map:a.map,gamedate:a.gamedate,authToken:c}).success(function(b){b.success?(console.log("Game saved"),self.location="/edit?gameId="+b.gameId):(console.log("Error"),console.log(b),a.errorMessage="Leider trat ein Fehler auf, Info:"+b.message)}).error(function(b,c){console.log("ERROR"),console.log(b),console.log(c),a.errorMessage="Leider trat ein Fehler auf: Status:"+c+", Info:"+b.message})}}]);