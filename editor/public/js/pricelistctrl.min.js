"use strict";var pricelistControl=angular.module("pricelistApp",["ui.bootstrap","ui.sortable"]);pricelistControl.controller("pricelistCtrl",["$scope","$http","$interval","$timeout",function(a,b){a.test=gameId,a.data=void 0,a.panel="list";var c="none";a.setPanel=function(b){a.panel=b},a.finalizeIt=function(){b.post("/gameplay/finalize",{gameId:a.data.gameplay.internal.gameId,authToken:c}).success(function(b){b.success?(console.log("Gameplay finalized"),a.statusText=b.message,a.data.gameplay.internal.finalized=!0):(console.log("Error"),console.log(b),a.statusText="Fehler beim Speichern: "+b.message)}).error(function(b,c){console.log("ERROR"),console.log(b),console.log(c),a.statusText="Fehler beim Speichern: "+b.message})},$(document).ready(function(){b.get("/pricelist/get?gameId="+gameId).success(function(d){return console.log(d),d.success?(a.data=d,void b.get("/authtoken").success(function(a){c=a.authToken,console.log("Auth ok")}).error(function(b,c){console.log("error:"),console.log(b),console.log(c),a.errorMessage="Authentisierungsfehler, das Spiel kann nicht bearbeitet werden. Status: "+c})):(a.panel="error",void(a.errorMessage="Der Server liefert folgende Antwort: "+d.message))}).error(function(b,c){console.log("load-game-error"),console.log(b),console.log(c),a.panel="error",a.errorMessage="Ladefehler, das Spiel kann nicht angesehen werden. Status: "+c})})}]);